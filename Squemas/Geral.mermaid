graph TD
    %% ============= MÃ“DULO DE ENERGIA =============
    subgraph Power["ðŸ”‹ MÃ³dulo de Energia"]
        USB_IN["Micro USB 5V"] --> FUSE["F1: FusÃ­vel 3A"]
        FUSE --> TP5100["U1: TP5100 (Carregador)"]
        TP5100 --> BAT["B1-B2: 18650 3.7V 6000mAh"]
        BAT --> MP1584["U2: MP1584EN (3.3V)"]
        MP1584 --> VCC_3V3["3.3V"]
        
        TP5100 --> LED_B["D1: LED Azul (Carga)"]
        TP5100 --> LED_G["D2: LED Verde (Completo)"]
        LED_B --> R1["R1: 330Î©"]
        LED_G --> R2["R2: 330Î©"]
        
        VCC_3V3 --> AP2114["U3: AP2114 (2.5V)"]
        VCC_3V3 --> LP5907["U4: LP5907 (1.2V)"]
        
        %% Capacitores
        C1["C1: 10Î¼F 25V"] --> TP5100
        C2["C2: 100nF"] --> TP5100
        C3["C3: 22Î¼F"] --> MP1584
        C4["C4: 100nF"] --> MP1584
        C5["C5: 10Î¼F"] --> AP2114
        C6["C6: 100nF"] --> AP2114
        C7["C7: 1Î¼F"] --> LP5907
        C8["C8: 100nF"] --> LP5907
    end

    %% ============= MÃ“DULO RF/SDR =============
    subgraph SDR["ðŸ“¡ MÃ³dulo RF/SDR"]
        RP2040["U5: RP2040"] -->|SPI| AT86RF215["U6: AT86RF215"]
        AT86RF215 --> RF09["J1: SMA Sub-1GHz"]
        AT86RF215 --> RF24["J2: SMA 2.4GHz"]
        
        %% Filtros e Matching
        L1["L1: 15nH"] --> MATCH1["Rede de Casamento"]
        C9["C9: 1.8pF"] --> MATCH1
        L2["L2: 5.6nH"] --> MATCH2["Rede de Casamento"]
        C10["C10: 1.2pF"] --> MATCH2
        
        %% TCXO
        Y1["Y1: TCXO 26MHz"] --> C11["C11: 12pF"]
        C11 --> GND
        Y1 --> C12["C12: 12pF"]
        C12 --> GND
    end

    %% ============= MÃ“DULO NFC/IR =============
    subgraph NFC["ðŸ“² MÃ³dulo NFC/IR"]
        PN532["U7: PN532"] --> ANT["Antena NFC"]
        ANT --> L3["L3: 1.5Î¼H"]
        ANT --> C13["C13: 27pF"]
        ANT --> C14["C14: 27pF"]
        
        %% Circuito IR
        IR_TX["Q1: TSAL6200"] --> R3["R3: 33Î©"]
        IR_RX["U8: VS1838B"] --> R4["R4: 10kÎ©"]
        IR_RX --> C15["C15: 100nF"]
    end

    %% ============= MÃ“DULO DE CONTROLE =============
    subgraph Control["ðŸŽ›ï¸ MÃ³dulo de Controle"]
        STM32["U9: STM32H743"] --> OLED["U10: SSD1306"]
        STM32 --> BTN1["S1: BotÃ£o tÃ¡til"]
        STM32 --> BTN2["S2: BotÃ£o tÃ¡til"]
        STM32 --> LED1["D3: LED Verde"]
        LED1 --> R5["R5: 330Î©"]
        
        %% EEPROM
        EEPROM["U11: 24LC256"] --> R6["R6: 4.7kÎ©"]
        EEPROM --> R7["R7: 4.7kÎ©"]
    end

    %% ============= CONEXÃ•ES =============
    VCC_3V3 --> SDR
    VCC_3V3 --> NFC
    VCC_3V3 --> Control
    GND --> SDR
    GND --> NFC
    GND --> Control
    
    STM32 -->|SPI| RP2040
    STM32 -->|I2C| PN532